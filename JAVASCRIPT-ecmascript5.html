<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>ECMAScript 5 - Javascript 5</title>
</head>
<body>
	<p id="demo"></p>
	<p id="demo2"></p>
	<p id="demo3"></p>
	<p id="demo4"></p>
	<p id="demo5"></p>
	<p id="demo6"></p>
	<p id="demo7"></p>
	<p id="demo8"></p>
	<p id="demo9"></p>
	<p id="demo10"></p>
	<p id="demo11"></p>
	<p id="demo12"></p>
	<p id="demo13"></p>
	<p id="demo14"></p>
	<p id="demo15"></p>
	<p id="demo16"></p>
	<p id="demo17"></p>
	<p id="demo18"></p>

	<script>
		//ECMAScript 5 is also known as ES5 and ECMAScript 2009
		/*
		These were the new features released in 2009:
		The "use strict" Directive
		String.trim()
		Array.isArray()
		Array.forEach()
		Array.map()
		Array.filter()
		Array.reduce()
		Array.reduceRight()
		Array.every()
		Array.some()
		Array.indexOf()
		Array.lastIndexOf()
		JSON.parse()
		JSON.stringify()
		Date.now()
		Property Getters and Setters
		New Object Property Methods
		*/

		/*Property access [ ] on strings
		Trailing commas in array and object literals
		Multiline string literals
		Reserved words as property names*/

		/*
		"use strict" defines that the JavaScript code should be executed in "strict mode".
		With strict mode you can, for example, not use undeclared variables.
		You can use strict mode in all your programs. It helps you to write cleaner code, like preventing you from using undeclared variables.
		"use strict" is just a string expression. Old browsers will not throw an error if they don't understand it.
		*/

		/*String.trim() removes whitespace from both sides of a string.*/
		var str = "		Hello World!	";
		document.getElementById("demo").innerHTML = str.trim();

		/*The isArray() method checks whether an object is an array.*/
		myFunction();
		function myFunction(){
			var fruits = ["Banana", "Orange", "Apple", "Mango"];
			var x = document.getElementById("demo2")
			x.innerHTML = Array.isArray(fruits);
		}

		//The forEach() method calls a function once for each array element.
		var txt="";
		var numbers = [45, 4, 9, 16, 25];
		numbers.forEach(myFunction2);
		document.getElementById("demo3").innerHTML = txt; 

		function myFunction2(value){
			txt = txt + value + "<br>";
		}

		//This example multiplies each array value by 2:
		var numbers1 = [45, 4, 9, 16, 25];
		var numbers2 = numbers1.map(myFunction3);
		document.getElementById("demo4").innerHTML = numbers2;

		function myFunction3(value){
			return value * 2;
		}

		/*This example creates a new array from elements with a value larger than 18.*/
		var numbers3 = [45, 4, 9, 16, 25];
		var over18 = numbers3.filter(myFunction4);
		document.getElementById("demo5").innerHTML = over18;

		function myFunction4(value){
			return value > 18;
		}

		/*This example finds the sum of all numbers in an array:*/
		var numbers4 = [45, 4, 9, 16, 25];
		var sum = numbers4.reduce(myFunction5);
		document.getElementById("demo6").innerHTML = sum;

		function myFunction5(total, value, index, array){
			return total + value;
		}

		/*This example also finds the sum of all numbers in an array.*/
		var sum2 = numbers4.reduceRight(myFunction6);
		document.getElementById("demo7").innerHTML = sum2;

		function myFunction6(total, value){
			return total + value;
		}

		//This example checks if all values are over 18.
		var allOver18 = numbers4.every(myFunction7);
		document.getElementById("demo8").innerHTML = allOver18;

		function myFunction7(value){
			return value > 18;
		}

		//This example checks if some values are over 18.
		var someOver18 = numbers4.some(myFunction8);
		document.getElementById("demo9").innerHTML = someOver18;

		function myFunction8(value){
			return value > 18;
		}

		//Search an array for an element value and returns its position.
		var fruits = ["Banana", "Orange", "Apple", "Mango"];
		var a = fruits.indexOf("Apple");
		document.getElementById("demo10").innerHTML = a;

		//Array.lastIndexOf() is the same as Array.indexOf(), but searches from the end of the array.
		document.getElementById("demo11").innerHTML = fruits.lastIndexOf("Apple");

		/*A common use of JSON is to send data to a web server.
		When sending data to a web server, the data has to be a string.
		Imagine we have this object in JavaScript.
		Use the JavaScript function JSON.stringify() to convert it into a string.
		The result will be a string following the JSON notation.
		myJSON is now a string, and ready to be sent to a server.*/
		var obj = {"name":"John", "age":30, "city":"New York"};
		var myJSON = JSON.stringify(obj);
		document.getElementById("demo12").innerHTML = myJSON;

		/*Date.now() returns the number of milliseconds since zero date (January 1. 1970 00:00:00 UTC).*/
		var timInMSs = Date.now();
		document.getElementById("demo13").innerHTML = timInMSs;
		//Date.now() returns the same as getTime() performed on a Date object.

		/*ES5 lets you define object methods with a syntax that looks like getting or setting a property.
		This example creates a getter for a property called fullName.*/
		//Criando um objeto.
		var person = {
			firstName: "John",
			lastName : "Doe",
			get fullName(){
				return this.firstName + " " + this.lastName;
			}
		};

		//Display data from the object using a getter:
		document.getElementById("demo14").innerHTML = person.fullName;

		//This example creates a setter and a getter for the language property.
		var person2 = {
			firstName : "John",
			lastName : "Doe",
			language : "NO",
			get lang(){
				return this.language;
			},
			set lang(value){
				//This example uses a setter to secure upper case updates of language.
				this.language = value.toUpperCase();
			}
		};
		/*Object.defineProperty() is a new Object method in ES5.
		It lets you define an object property and/or change a property's value and/or metadata.*/
		Object.defineProperty(person, "language",{
			get : function(){ return language },
			set : function(value) { language = value.toUpperCase()}
			/*value: "EN",
			writable : true,
			enumerable : true,
			configurable : true*/
		});

		var txt = "";
		for (var x in person2){
			txt += person2[x] + "<br>";
		}
		document.getElementById("demo16").innerHTML = txt;

		//Configurar uma propriedade de objeto usando um setter.
		person2.lang = "en";

		//Mostrando a informação do objeto usando o getter:
		document.getElementById("demo15").innerHTML = person2.lang;

		/*ECMAScript 5 added a lot of new Object Methods to JavaScript.
		Object.defineProperty(object, property, descriptor)

		//Adding or changing many object properties
		Object.defineProperty(object, descriptor)

		//Accessing Properties
		Object.getOwnpropertyDescriptor(object, property)

		//Returns all properties as an array
		Object.getOwnpropertyNames(object)

		//Returns enumerable properties as an array
		Object.keys(object)

		//Accessing the prototype
		Object.getPrototypeOf(object)

		//Prevents adding properties to an object
		Object.preventExtensions(object)
		//Returns true if properties can be added to an object
		Object.isExtensible(object)

		//returns true if properties (not values)
		Object.seal(object)
		//Returns true if object is sealed
		Object.isSealed(object)

		//Prevents any changes to an object
		Object.freeze(object)
		//Returns true if object is frozen
		Object.isFrozen(object)*/

		//The charAt() method returns the character at a specified index (position) in a string.
		var str2 = "HELLO WORLD!";
		document.getElementById("demo17").innerHTML = str2.charAt(0);

		//ECMAScript 5 allows property access on strings.
		document.getElementById("demo18").innerHTML = str2[0];

		//ECMAScript 5 allows trailing commas in object and array definitions.
		person3 = {
			firstName: "John",
			lastName: "Doe",
			age: 46,
		}

		points = [
			1,
			5, 
			10,
			25,
			40,
			100,
		];

		/*WARNING !!!
		Internet Explorer 8 will crash.
		JSON does not allow trailing commas.*/

		//Permitido
		var person = '{"firstName":"John", "lastName":"Doe", "age":46}'
		JSON.parse(person)

		//Não permitido
		var person = '{"firstName":"John", "lastName":"Doe", "age":46,}'
		JSON.parse(person)

		//JSON Arrays:
		//Permitido:
		points = [40, 100, 1, 5, 25, 10];

		//Não permitido:
		points = [40, 100, 1, 5, 25, 10,];

		//ECMAScript 5 allows string literals over multiple lines if escaped with a backslash.
		"Hello \
		Dolly!";

		//A safer way to break up a string literal, is to use string addition.
		"Hello " +
		"Dolly!";

		//ECMAScript 5 allows reserved words as property names.
		var obj = {name:"John", new:"yes"}
	</script>
</body>
</html>